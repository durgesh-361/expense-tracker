{"ast":null,"code":"var _jsxFileName = \"D:\\\\mern-stack\\\\expense\\\\frontend\\\\src\\\\components\\\\TransactionForm.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { addTransaction, updateTransaction, fetchTransactions } from \"../redux/transactionSlice\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TransactionForm({\n  editingTransaction,\n  setEditingTransaction\n}) {\n  _s();\n  const [form, setForm] = useState({\n    type: \"select\",\n    // default to \"select\"\n    amount: \"\",\n    category: \"\",\n    description: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const dispatch = useDispatch();\n\n  // Populate form when editingTransaction changes\n  useEffect(() => {\n    if (editingTransaction) {\n      setForm({\n        type: editingTransaction.type,\n        amount: editingTransaction.amount,\n        category: editingTransaction.category,\n        description: editingTransaction.description || \"\",\n        id: editingTransaction._id\n      });\n    }\n  }, [editingTransaction]);\n  const validateForm = () => {\n    if (!form.amount || form.amount <= 0) {\n      toast.error(\"Please enter a valid amount\");\n      return false;\n    }\n    if (!form.category.trim()) {\n      toast.error(\"Please enter a category\");\n      return false;\n    }\n    if (form.type === \"select\") {\n      toast.error(\"Please select a transaction type\");\n      return false;\n    }\n    return true;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    try {\n      setLoading(true);\n      if (form.id) {\n        // Edit mode\n        await dispatch(updateTransaction(form)).unwrap();\n        toast.success(\"Transaction updated successfully ðŸŽ‰\");\n      } else {\n        // Add mode\n        await dispatch(addTransaction({\n          ...form,\n          date: new Date()\n        })).unwrap();\n        toast.success(\"Transaction added successfully ðŸŽ‰\");\n      }\n      await dispatch(fetchTransactions());\n      setForm({\n        type: \"select\",\n        amount: \"\",\n        category: \"\",\n        description: \"\"\n      });\n      if (setEditingTransaction) setEditingTransaction(null); // reset edit mode\n    } catch {\n      toast.error(\"Failed to save transaction. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-md border border-gray-200 w-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-lg font-semibold mb-4 text-gray-700\",\n      children: form.id ? \"Edit Transaction\" : \"Add New Transaction\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"grid lg:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: form.type,\n        onChange: e => setForm({\n          ...form,\n          type: e.target.value\n        }),\n        className: \"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"select\",\n          children: \"Select type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"expense\",\n          children: \"Expense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"income\",\n          children: \"Income\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Amount\",\n        value: form.amount,\n        onChange: e => setForm({\n          ...form,\n          amount: e.target.value\n        }),\n        className: \"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Category\",\n        value: form.category,\n        onChange: e => setForm({\n          ...form,\n          category: e.target.value\n        }),\n        className: \"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Description\",\n        value: form.description,\n        onChange: e => setForm({\n          ...form,\n          description: e.target.value\n        }),\n        className: \"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 col-span-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: `col-span-2 bg-indigo-600 text-white py-3 rounded-lg font-medium transition ${loading ? \"opacity-60 cursor-not-allowed\" : \"hover:bg-indigo-700\"}`,\n        children: loading ? form.id ? \"Updating...\" : \"Adding...\" : form.id ? \"Update Transaction\" : \"+ Add Transaction\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(TransactionForm, \"Uod3g8baSgeD5juursmjGncA41A=\", false, function () {\n  return [useDispatch];\n});\n_c = TransactionForm;\nvar _c;\n$RefreshReg$(_c, \"TransactionForm\");","map":{"version":3,"names":["useState","useEffect","useDispatch","addTransaction","updateTransaction","fetchTransactions","toast","jsxDEV","_jsxDEV","TransactionForm","editingTransaction","setEditingTransaction","_s","form","setForm","type","amount","category","description","loading","setLoading","dispatch","id","_id","validateForm","error","trim","handleSubmit","e","preventDefault","unwrap","success","date","Date","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["D:/mern-stack/expense/frontend/src/components/TransactionForm.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addTransaction, updateTransaction, fetchTransactions } from \"../redux/transactionSlice\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function TransactionForm({ editingTransaction, setEditingTransaction }) {\r\n  const [form, setForm] = useState({\r\n    type: \"select\", // default to \"select\"\r\n    amount: \"\",\r\n    category: \"\",\r\n    description: \"\",\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  // Populate form when editingTransaction changes\r\n  useEffect(() => {\r\n    if (editingTransaction) {\r\n      setForm({\r\n        type: editingTransaction.type,\r\n        amount: editingTransaction.amount,\r\n        category: editingTransaction.category,\r\n        description: editingTransaction.description || \"\",\r\n        id: editingTransaction._id,\r\n      });\r\n    }\r\n  }, [editingTransaction]);\r\n\r\n  const validateForm = () => {\r\n    if (!form.amount || form.amount <= 0) {\r\n      toast.error(\"Please enter a valid amount\");\r\n      return false;\r\n    }\r\n    if (!form.category.trim()) {\r\n      toast.error(\"Please enter a category\");\r\n      return false;\r\n    }\r\n    if (form.type === \"select\") {\r\n      toast.error(\"Please select a transaction type\");\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      if (form.id) {\r\n        // Edit mode\r\n        await dispatch(updateTransaction(form)).unwrap();\r\n        toast.success(\"Transaction updated successfully ðŸŽ‰\");\r\n      } else {\r\n        // Add mode\r\n        await dispatch(addTransaction({ ...form, date: new Date() })).unwrap();\r\n        toast.success(\"Transaction added successfully ðŸŽ‰\");\r\n      }\r\n\r\n      await dispatch(fetchTransactions());\r\n      setForm({ type: \"select\", amount: \"\", category: \"\", description: \"\" });\r\n      if (setEditingTransaction) setEditingTransaction(null); // reset edit mode\r\n    } catch {\r\n      toast.error(\"Failed to save transaction. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-md border border-gray-200 w-full\">\r\n      <h2 className=\"text-lg font-semibold mb-4 text-gray-700\">\r\n        {form.id ? \"Edit Transaction\" : \"Add New Transaction\"}\r\n      </h2>\r\n\r\n      <form onSubmit={handleSubmit} className=\"grid lg:grid-cols-2 gap-4\">\r\n        <select\r\n          value={form.type}\r\n          onChange={(e) => setForm({ ...form, type: e.target.value })}\r\n          className=\"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500\"\r\n        >\r\n          <option value=\"select\">Select type</option>\r\n          <option value=\"expense\">Expense</option>\r\n          <option value=\"income\">Income</option>\r\n        </select>\r\n\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Amount\"\r\n          value={form.amount}\r\n          onChange={(e) => setForm({ ...form, amount: e.target.value })}\r\n          className=\"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Category\"\r\n          value={form.category}\r\n          onChange={(e) => setForm({ ...form, category: e.target.value })}\r\n          className=\"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500\"\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Description\"\r\n          value={form.description}\r\n          onChange={(e) => setForm({ ...form, description: e.target.value })}\r\n          className=\"p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 col-span-2\"\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className={`col-span-2 bg-indigo-600 text-white py-3 rounded-lg font-medium transition ${\r\n            loading ? \"opacity-60 cursor-not-allowed\" : \"hover:bg-indigo-700\"\r\n          }`}\r\n        >\r\n          {loading ? (form.id ? \"Updating...\" : \"Adding...\") : form.id ? \"Update Transaction\" : \"+ Add Transaction\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}